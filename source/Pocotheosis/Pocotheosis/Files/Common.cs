using System.IO;

namespace Pocotheosis
{
    static partial class Generator
    {
        static bool OutputUpToDate(PocoNamespace ns, string filename)
        {
            var info = new FileInfo(filename);
            return info.Exists && info.LastWriteTimeUtc >= ns.LastWriteTimeUtc;
        }

        static void WriteNamespaceHeader(PocoNamespace ns, TextWriter output)
        {
            var version = typeof(Program).Assembly.GetName().Version;
            output.WriteLine(
@"// ================================================================================
// This file was automatically generated by Pocotheosis version {0}.
// DO NOT EDIT THIS FILE DIRECTLY! Edit the manifest file and regenerate it instead
// ================================================================================

using _nsS_ = global::System;
using _nsC_ = global::System.Collections;
using _nsG_ = global::System.Collections.Generic;
using _nsL_ = global::System.Linq;
using _nsI_ = global::System.IO;
using _nsT_ = global::System.Text;
using _nsCC_ = global::System.Collections.Concurrent;
using _nsGl_ = global::System.Globalization;

namespace {1}
{{", version, ns.Name);
        }

        static void WriteNamespaceFooter(TextWriter output)
        {
            output.WriteLine("}");
        }
    }
}
